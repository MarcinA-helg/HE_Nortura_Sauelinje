<StructuredTextModel xmlns="http://schemas.datacontract.org/2004/07/Omron.Cxap.Modules.StructuredText.Core" xmlns:i="http://www.w3.org/2001/XMLSchema-instance"><Text>//------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ &#xD;
//	NAME:			HE_TaskTimeMonitor                                                                                                                                                                                                                                                                       &#xD;
//	CREATOR:		Helgevold - Jan Magne Dybvik                                                                                                                                                                                                                                                  &#xD;
//                                                                                                                                                                                                                                                                                                                            &#xD;
//------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ &#xD;
//  VERSION LOG:                                                                                                                                                                                                                                                                                                   &#xD;
//	VERSION		DATE					SIGN							DESCRIPTION                                                                                                                                                                                                                                 &#xD;
//	1.0.0				2024-04-10			Jan Magne Dybvik		Initial Release&#xD;
//	2.0.0				2025-03-25			William Veim				Rework&#xD;
//	2.0.1				2025-04-29			Ruben Byman				Added alarm output&#xD;
//===============================================================================================================================&#xD;
//&#xD;
//			DESCRTIPTION: 	&#xD;
//			Monitoring of task cycle time, with alarm threshold for maximum cycle time&#xD;
//		&#xD;
//================================================================================================================================&#xD;
&#xD;
Wrk_TaskPeriod := GetMyTaskInterval();&#xD;
&#xD;
GetMyTaskStatus(&#xD;
	LastExecTime=&gt;Wrk_LastExecTime, &#xD;
	MaxExecTime=&gt;Wrk_MaxExecTime, &#xD;
	MinExecTime=&gt;Wrk_MinExecTime, &#xD;
	ExecCount=&gt;Wrk_ExecCount, &#xD;
	Exceeded=&gt;Wrk_Exceeded, &#xD;
	ExceedCount=&gt;Wrk_ExceedCount);&#xD;
&#xD;
Wrk_TaskPeriod_REAL := 		LINT_TO_REAL(TimeToNanoSec(In:=Wrk_TaskPeriod))/1000000.0;&#xD;
Wrk_LastExecTime_REAL := LINT_TO_REAL(TimeToNanoSec(In:=Wrk_LastExecTime))/1000000.0;&#xD;
Wrk_MaxExecTime_REAL := LINT_TO_REAL(TimeToNanoSec(In:=Wrk_MaxExecTime))/1000000.0;&#xD;
&#xD;
Wrk_LastExecPercent := Wrk_LastExecTime_REAL / Wrk_TaskPeriod_REAL * 100.0;&#xD;
Wrk_MaxExecPercent := Wrk_MaxExecTime_REAL / Wrk_TaskPeriod_REAL * 100.0;&#xD;
&#xD;
Wrk_MaxExec_LimitExceeded := Wrk_MaxExecPercent &gt; Cfg_MaxExecPercent_Limit;&#xD;
&#xD;
//Gjenomsnitt av task time&#xD;
Average(ENS:=TRUE, &#xD;
				Inp_Value:=Wrk_LastExecTime_REAL, &#xD;
				Inp_Reset:=FALSE, &#xD;
				Cfg_NumberOfValues:=Wrk_NumberOfValues, &#xD;
				Cfg_SamplingInterval:=Wrk_SamplingInterval, &#xD;
				Out_Average=&gt;Wrk_AvgTaskTime);&#xD;
&#xD;
//Output&#xD;
Avg_TaskTime := Wrk_AvgTaskTime;&#xD;
Max_TaskTime := Wrk_MaxExecTime_REAL;&#xD;
Sts_Alarm := Wrk_MaxExec_LimitExceeded;</Text></StructuredTextModel>