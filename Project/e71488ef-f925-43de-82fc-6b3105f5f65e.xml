<StructuredTextModel xmlns="http://schemas.datacontract.org/2004/07/Omron.Cxap.Modules.StructuredText.Core" xmlns:i="http://www.w3.org/2001/XMLSchema-instance"><Text>//-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------&#xD;
//	NAME:						HE_Ramp_Gain&#xD;
//	CREATOR:					Ruben Byman&#xD;
// REQUIREMENTS: 		NX CPU&#xD;
//&#xD;
//-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------&#xD;
//  VERSION LOG:&#xD;
//	 VERSION				DATE				SIGN						DESCRIPTION&#xD;
//	 1.0.0					2024-03-19		Ruben Byman			Initial release&#xD;
//	 2.0.0					2025-03-25		William Veim			Rework&#xD;
//&#xD;
//================================================================================================================================&#xD;
//&#xD;
//			DESCRTIPTION: 	&#xD;
//			Ramps the control towards the desired value over a set time&#xD;
//		&#xD;
//================================================================================================================================&#xD;
&#xD;
//Skriver til interne variabler&#xD;
Wrk_Input := Inp_Value;&#xD;
&#xD;
Wrk_StrokeTime:= LINT_TO_UINT(TimeToSec(Cfg_StrokeTime));&#xD;
&#xD;
//Setter oppløsning&#xD;
IF Cfg_Resolution THEN&#xD;
	Resolution := 1000;&#xD;
ELSE&#xD;
	Resolution := 100;&#xD;
END_IF;&#xD;
&#xD;
//Setter pådrag ut likt pådrag inn om forskjell er mindre enn oppløsning&#xD;
TON_OutputEqual(PT:=DIVTIME(In1:=SecToTime(In:=Wrk_StrokeTime), In2:=Resolution), ET=&gt;ET_OutputEqual);&#xD;
TON_OutputEqual.In := (ABS(In:=Wrk_Output - Wrk_Input) &lt; ((Cfg_Output_X1-Cfg_Output_X0) / Resolution)) AND NOT TON_OutputEqual.Q AND NOT (Wrk_Input = Wrk_Output);&#xD;
IF TON_OutputEqual.Q THEN&#xD;
	Wrk_Output := Wrk_Input;&#xD;
END_IF;&#xD;
&#xD;
//Øker eller minsker pådraget&#xD;
TON_IncreaseOutput(PT:=DIVTIME(In1:=SecToTime(In:=Wrk_StrokeTime), In2:=Resolution), ET=&gt;ET_ChangeTime);&#xD;
TON_IncreaseOutput.In := (ABS(In:=Wrk_Output - Wrk_Input) &gt;= ((Cfg_Output_X1-Cfg_Output_X0) / Resolution)) AND NOT TON_IncreaseOutput.Q;&#xD;
IF TON_IncreaseOutput.Q AND (Wrk_Input &gt; Wrk_Output) THEN&#xD;
	Wrk_Output := Wrk_Output + ((Cfg_Output_X1-Cfg_Output_X0) / Resolution);&#xD;
ELSIF TON_IncreaseOutput.Q AND (Wrk_Input &lt; Wrk_Output) THEN&#xD;
	Wrk_Output := Wrk_Output - ((Cfg_Output_X1-Cfg_Output_X0) / Resolution);&#xD;
END_IF;&#xD;
&#xD;
//Skriver til output variabel&#xD;
IF Wrk_Output &lt; Cfg_Output_X0 THEN&#xD;
	Wrk_Output := Cfg_Output_X0;//Overskriver output til X0 input&#xD;
END_IF;&#xD;
&#xD;
Out_Output := Wrk_Output;//Henter pådrag fra ramp gain&#xD;
&#xD;
</Text></StructuredTextModel>