<StructuredTextModel xmlns="http://schemas.datacontract.org/2004/07/Omron.Cxap.Modules.StructuredText.Core" xmlns:i="http://www.w3.org/2001/XMLSchema-instance"><Text>//-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------&#xD;
//	NAME:				HE_100F_Drive_State&#xD;
//	CREATOR:			Helgevold - William Veim&#xD;
//&#xD;
// REQUIREMENTS: Vacon 100F&#xD;
// DESCRTIPTION: 	Generer en string med Frekvensomformerens modus/tilstand&#xD;
//-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------&#xD;
//  VERSION LOG:&#xD;
//	 VERSION			DATE				SIGN						DESCRIPTION&#xD;
//	 1.0.0				2025-03-27		William Veim			Initial release&#xD;
//&#xD;
//================================================================================================================================&#xD;
&#xD;
&#xD;
// Initilize&#xD;
Wrk_StateValue := WORD_TO_UINT(Inp_State);&#xD;
Wrk_StateString := '';&#xD;
Wrk_StateDescription := '';&#xD;
WRK_StateCode := '';&#xD;
&#xD;
Wrk_HMIS_Value := INT_TO_STRING(Wrk_StateValue);&#xD;
&#xD;
CASE Wrk_StateValue OF&#xD;
	0:&#xD;
		WRK_StateCode := 'TBC';&#xD;
		Wrk_StateDescription := 'TO BE COMPLETED';&#xD;
		&#xD;
ELSE&#xD;
	WRK_StateCode := '???';&#xD;
	Wrk_StateDescription := 'Unkown State';&#xD;
&#xD;
END_CASE;&#xD;
&#xD;
&#xD;
&#xD;
&#xD;
// Add HMIS Code&#xD;
IF TestABit(In:=Cfg_Composition, Pos:=0) THEN&#xD;
	Wrk_StateString := CONCAT(Wrk_StateString, Wrk_HMIS_Value);&#xD;
END_IF;	&#xD;
&#xD;
&#xD;
// Add State Code&#xD;
IF TestABit(In:=Cfg_Composition, Pos:=1) THEN&#xD;
	IF LEN(Wrk_StateString) &gt; 0 THEN&#xD;
		Wrk_StateString := CONCAT(Wrk_StateString, Cfg_Delimiter);&#xD;
	END_IF;&#xD;
	Wrk_StateString := CONCAT(Wrk_StateString, WRK_StateCode);&#xD;
END_IF;&#xD;
&#xD;
// Add State Description&#xD;
IF TestABit(In:=Cfg_Composition, Pos:=2) THEN&#xD;
	IF LEN(Wrk_StateString) &gt; 0 THEN&#xD;
		Wrk_StateString := CONCAT(Wrk_StateString, Cfg_Delimiter);&#xD;
	END_IF;&#xD;
	Wrk_StateString := CONCAT(Wrk_StateString, Wrk_StateDescription);&#xD;
END_IF;&#xD;
&#xD;
HE_100F_Drive_State := Wrk_StateString;</Text></StructuredTextModel>