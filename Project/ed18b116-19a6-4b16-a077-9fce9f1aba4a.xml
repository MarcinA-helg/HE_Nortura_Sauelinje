<StructuredTextModel xmlns="http://schemas.datacontract.org/2004/07/Omron.Cxap.Modules.StructuredText.Core" xmlns:i="http://www.w3.org/2001/XMLSchema-instance"><Text>//-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------&#xD;
//	NAME:				HE_100F_Last_Fault&#xD;
//	CREATOR:			Helgevold - William Veim&#xD;
//&#xD;
// REQUIREMENTS: Vacon 100F&#xD;
// DESCRTIPTION: 	Generer en string med siste feilkode i frekvensomformeren&#xD;
//-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------&#xD;
//  VERSION LOG:&#xD;
//	 VERSION			DATE				SIGN						DESCRIPTION&#xD;
//	 1.0.0				2025-03-27		William Veim			Initial release&#xD;
//&#xD;
//================================================================================================================================&#xD;
&#xD;
&#xD;
// Initilize&#xD;
Wrk_FaultValue := WORD_TO_UINT(Inp_LastFault);&#xD;
Wrk_FaultString := '';&#xD;
Wrk_FaultDescription := '';&#xD;
WRK_FaultCode := '';&#xD;
&#xD;
Wrk_LFT_Value := INT_TO_STRING(Wrk_FaultValue);&#xD;
&#xD;
CASE Wrk_FaultValue OF&#xD;
	0 :&#xD;
		WRK_FaultCode := 'NOF';&#xD;
		Wrk_FaultDescription := 'No error detected';&#xD;
		&#xD;
ELSE&#xD;
	WRK_FaultCode := '???';&#xD;
	Wrk_FaultDescription := 'Unkown Fault';&#xD;
&#xD;
END_CASE;&#xD;
&#xD;
&#xD;
// Add LFT Code&#xD;
IF TestABit(In:=Cfg_Composition, Pos:=0) THEN&#xD;
	Wrk_FaultString := CONCAT(Wrk_FaultString, Wrk_LFT_Value);&#xD;
END_IF;	&#xD;
&#xD;
&#xD;
// Add Fault Code&#xD;
IF TestABit(In:=Cfg_Composition, Pos:=1) THEN&#xD;
	IF LEN(Wrk_FaultString) &gt; 0 THEN&#xD;
		Wrk_FaultString := CONCAT(Wrk_FaultString, Cfg_Delimiter);&#xD;
	END_IF;&#xD;
	Wrk_FaultString := CONCAT(Wrk_FaultString, WRK_FaultCode);&#xD;
END_IF;&#xD;
&#xD;
&#xD;
// Add Fault Description&#xD;
IF TestABit(In:=Cfg_Composition, Pos:=2) THEN&#xD;
	IF LEN(Wrk_FaultString) &gt; 0 THEN&#xD;
		Wrk_FaultString := CONCAT(Wrk_FaultString, Cfg_Delimiter);&#xD;
	END_IF;&#xD;
	Wrk_FaultString := CONCAT(Wrk_FaultString, Wrk_FaultDescription);&#xD;
END_IF;&#xD;
&#xD;
&#xD;
HE_100F_Drive_Fault := Wrk_FaultString;</Text></StructuredTextModel>