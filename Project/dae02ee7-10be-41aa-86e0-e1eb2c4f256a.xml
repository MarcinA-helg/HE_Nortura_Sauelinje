<StructuredTextModel xmlns="http://schemas.datacontract.org/2004/07/Omron.Cxap.Modules.StructuredText.Core" xmlns:i="http://www.w3.org/2001/XMLSchema-instance"><Text>//-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------&#xD;
//	NAME:				HE_WEG_Drive_Alarms&#xD;
//	CREATOR:			Helgevold - Jan Magne Dybvik&#xD;
//&#xD;
// REQUIREMENTS: WEG CFW900&#xD;
// DESCRTIPTION: 	Generates a string with Alarm code and description&#xD;
//-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------&#xD;
//  VERSION LOG:&#xD;
//	 VERSION			DATE				SIGN						DESCRIPTION&#xD;
//	 1.0					2025-02-19		Jan Magne Dybvik	Initial release&#xD;
//&#xD;
//================================================================================================================================&#xD;
&#xD;
&#xD;
// Initilize&#xD;
Wrk_AlarmValue := WORD_TO_UINT(Inp_InverterFault);&#xD;
Wrk_AlarmString := '';&#xD;
Wrk_AlarmDescription := '';&#xD;
&#xD;
Wrk_AlarmCode := INT_TO_STRING(Wrk_AlarmValue);&#xD;
&#xD;
CASE Wrk_AlarmValue OF&#xD;
	18:&#xD;
		Wrk_AlarmDescription := 'Low Battery Voltage';&#xD;
	19:&#xD;
		Wrk_AlarmDescription := '24 Vdc Power Supply Overvoltage';&#xD;
	20:&#xD;
		Wrk_AlarmDescription := '24 Vdc Power Supply Undervoltage';&#xD;
	46:&#xD;
		Wrk_AlarmDescription := 'High Load on the Motor';&#xD;
	47:&#xD;
		Wrk_AlarmDescription := 'High Load on the IGBTs';&#xD;
	50:&#xD;
		Wrk_AlarmDescription := 'IGBT1 U Overtemp';&#xD;
	51:&#xD;
		Wrk_AlarmDescription := 'IGBT1 V Overtemp';&#xD;
	52:&#xD;
		Wrk_AlarmDescription := 'IGBT1 W Overtemp';&#xD;
	60:&#xD;
		Wrk_AlarmDescription := 'IGBT/DRL Junction Overtemp';&#xD;
	90:&#xD;
		Wrk_AlarmDescription := 'External Alarm';&#xD;
	110:&#xD;
		Wrk_AlarmDescription := 'High Motor Temperature';&#xD;
	152:&#xD;
		Wrk_AlarmDescription := 'Pow.Int. Air Overtemp';&#xD;
	154:&#xD;
		Wrk_AlarmDescription := 'Cont. Int. Air Overtemp';&#xD;
	156:&#xD;
		Wrk_AlarmDescription := 'Inverter Undertemperature';&#xD;
	186:&#xD;
		Wrk_AlarmDescription := 'Pow. Fan 1 Speed';&#xD;
	187:&#xD;
		Wrk_AlarmDescription := 'Pow. Fan 2 Speed ';&#xD;
	188:&#xD;
		Wrk_AlarmDescription := 'Pow. Fan 3 Speed ';&#xD;
	189:&#xD;
		Wrk_AlarmDescription := 'Pow. Fan 4 Speed ';&#xD;
	190:&#xD;
		Wrk_AlarmDescription := 'Int. Fan 1 Speed';&#xD;
	191:&#xD;
		Wrk_AlarmDescription := 'Int. Fan 2 Speed';&#xD;
	702:&#xD;
		Wrk_AlarmDescription := 'Inverter Disabled';&#xD;
&#xD;
ELSE&#xD;
	Wrk_AlarmDescription := 'See Manual';&#xD;
&#xD;
END_CASE;&#xD;
&#xD;
&#xD;
// Add Status Code&#xD;
IF TestABit(In:=Cfg_Composition, Pos:=0) THEN&#xD;
	Wrk_AlarmString := CONCAT(Wrk_AlarmString, Wrk_AlarmCode);&#xD;
END_IF;	&#xD;
&#xD;
&#xD;
// Add State Description&#xD;
IF TestABit(In:=Cfg_Composition, Pos:=1) THEN&#xD;
	IF LEN(Wrk_AlarmString) &gt; 0 THEN&#xD;
		Wrk_AlarmString := CONCAT(Wrk_AlarmString, Cfg_Delimiter);&#xD;
	END_IF;&#xD;
	Wrk_AlarmString := CONCAT(Wrk_AlarmString, Wrk_AlarmDescription);&#xD;
END_IF;&#xD;
&#xD;
&#xD;
HE_WEG_Drive_Alarms  := Wrk_AlarmString;</Text></StructuredTextModel>