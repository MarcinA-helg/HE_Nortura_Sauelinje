<StructuredTextModel xmlns="http://schemas.datacontract.org/2004/07/Omron.Cxap.Modules.StructuredText.Core" xmlns:i="http://www.w3.org/2001/XMLSchema-instance"><Text>//-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------&#xD;
//	NAME:						Statistics&#xD;
//	CREATOR:					Helgevold - Daniel Årvik&#xD;
// REQUIREMENTS: 		NX CPU&#xD;
// &#xD;
//-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------&#xD;
//  VERSION LOG:&#xD;
//	VERSION			DATE					SIGN						DESCRIPTION&#xD;
//	1.0.0					2023-02-01			Daniel Årvik				Initial release&#xD;
// 2.0.0					2025-04-02			William Veim			ReWork&#xD;
//================================================================================================================================&#xD;
//&#xD;
//		BESKRIVELSE:&#xD;
//		Registrerer driftstimer og resetdato basert på total reset og service reset.&#xD;
//		Registrerer også antall starter siden total reset.&#xD;
//&#xD;
//================================================================================================================================&#xD;
&#xD;
IF P_First_Run THEN&#xD;
	Tmp_RunTime_Total := RunTime_Total;&#xD;
	Tmp_RunTime_Service := RunTime_Service;&#xD;
END_IF;&#xD;
&#xD;
// Teller totale driftstimer og tid siden service&#xD;
Counter_Total(In:=Run, PT:=T#106751d, Reset:=Reset_Total, ET=&gt;Wrk_RunTime_Total);&#xD;
Counter_Service(In:=Run, PT:=T#106751d, Reset:=Reset_Service, ET=&gt;Wrk_RunTime_Service);&#xD;
&#xD;
//Setter dato for service ved første start &#xD;
IF DateToString(ResetDate_Service) = '1970-01-01' AND Run THEN&#xD;
	ResetDate_Service := DT_TO_DATE(GetTime());&#xD;
END_IF;&#xD;
&#xD;
// Setter dato for service til dagens dato om Reset_Service går høy&#xD;
IF Reset_Service THEN&#xD;
	Tmp_RunTime_Service := TIME#0s;&#xD;
	ResetDate_Service := DT_TO_DATE(GetTime());&#xD;
END_IF;&#xD;
&#xD;
//Setter dato for total ved første start &#xD;
IF DateToString(ResetDate_Total) = '1970-01-01' AND Run THEN&#xD;
	ResetDate_Total := DT_TO_DATE(GetTime());&#xD;
END_IF;&#xD;
&#xD;
// Setter dato for total resett til dagens dato om Reset_Total går høy&#xD;
IF Reset_Total THEN&#xD;
	Tmp_RunTime_Total := TIME#0s;&#xD;
	ResetDate_Total := DT_TO_DATE(GetTime());&#xD;
	NumberOfStarts := 0;&#xD;
END_IF;&#xD;
&#xD;
// Øker antall starter når Drift går høy&#xD;
RE_Running(Clk:=Run);&#xD;
IF RE_Running.Q THEN&#xD;
	NumberOfStarts := NumberOfStarts + 1;&#xD;
END_IF;&#xD;
&#xD;
RunTime_Total := ADD_TIME(In1:=Tmp_RunTime_Total, In2:=Wrk_RunTime_Total);&#xD;
RunTime_Service := ADD_TIME(In1:=Tmp_RunTime_Service, In2:=Wrk_RunTime_Service);</Text></StructuredTextModel>