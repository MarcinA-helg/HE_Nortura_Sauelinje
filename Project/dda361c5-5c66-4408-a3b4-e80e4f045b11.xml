<StructuredTextModel xmlns="http://schemas.datacontract.org/2004/07/Omron.Cxap.Modules.StructuredText.Core" xmlns:i="http://www.w3.org/2001/XMLSchema-instance"><Text>//-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------&#xD;
//	NAME:				HE_WEG_Drive_State&#xD;
//	CREATOR:			Helgevold - Jan Magne Dybvik&#xD;
//&#xD;
// REQUIREMENTS: WEG CFW900&#xD;
// DESCRTIPTION: 	Generates a string with Status code and description&#xD;
//-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------&#xD;
//  VERSION LOG:&#xD;
//	 VERSION			DATE				SIGN						DESCRIPTION&#xD;
//	 1.0					2025-02-11		Jan Magne Dybvik	Initial release&#xD;
//&#xD;
//================================================================================================================================&#xD;
&#xD;
&#xD;
// Initilize&#xD;
Wrk_StatusValue := WORD_TO_UINT(Inp_InverterStatus);&#xD;
Wrk_StateString := '';&#xD;
Wrk_StateDescription := '';&#xD;
&#xD;
Wrk_HMIS_Value := INT_TO_STRING(Wrk_StatusValue);&#xD;
&#xD;
CASE Wrk_StatusValue OF&#xD;
	0:&#xD;
		Wrk_StateDescription := 'Ready';&#xD;
	1:&#xD;
		Wrk_StateDescription := 'Run';&#xD;
	2:&#xD;
		Wrk_StateDescription := 'Undervoltage';&#xD;
	3:&#xD;
		Wrk_StateDescription := 'Fault';&#xD;
	4:&#xD;
		Wrk_StateDescription := 'Configuration';&#xD;
	5:&#xD;
		Wrk_StateDescription := 'STO';&#xD;
	6:&#xD;
		Wrk_StateDescription := 'Power Off';&#xD;
	7:&#xD;
		Wrk_StateDescription := 'Disabled';&#xD;
	8:&#xD;
		Wrk_StateDescription := 'SS1';&#xD;
	9:&#xD;
		Wrk_StateDescription :='Self Tuning';&#xD;
	10:&#xD;
		Wrk_StateDescription := 'Sleep';&#xD;
	&#xD;
ELSE&#xD;
	Wrk_StateDescription := 'See Manual';&#xD;
&#xD;
END_CASE;&#xD;
&#xD;
&#xD;
// Add Status Code&#xD;
IF TestABit(In:=Cfg_Composition, Pos:=0) THEN&#xD;
	Wrk_StateString := CONCAT(Wrk_StateString, Wrk_HMIS_Value);&#xD;
END_IF;	&#xD;
&#xD;
&#xD;
// Add State Description&#xD;
IF TestABit(In:=Cfg_Composition, Pos:=1) THEN&#xD;
	IF LEN(Wrk_StateString) &gt; 0 THEN&#xD;
		Wrk_StateString := CONCAT(Wrk_StateString, Cfg_Delimiter);&#xD;
	END_IF;&#xD;
	Wrk_StateString := CONCAT(Wrk_StateString, Wrk_StateDescription);&#xD;
END_IF;&#xD;
&#xD;
HE_WEG_Drive_State := Wrk_StateString;</Text></StructuredTextModel>