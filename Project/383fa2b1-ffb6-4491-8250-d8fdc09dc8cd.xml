<StructuredTextModel xmlns="http://schemas.datacontract.org/2004/07/Omron.Cxap.Modules.StructuredText.Core" xmlns:i="http://www.w3.org/2001/XMLSchema-instance"><Text>//------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ &#xD;
//	NAME:			HE_VFD_CalculatedFlow_P                                                                                                                                                                                                                                               &#xD;
//	CREATOR:		Helgevold - William Veim                                                                                                                                                                                                                                                              &#xD;
//                                                                                                                                                                                                                                                                                                                            &#xD;
//------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ &#xD;
//  VERSION LOG:                                                                                                                                                                                                                                                                                                   &#xD;
//	VERSION		DATE				SIGN						DESCRIPTION                                                                                                                                                                                                                                 &#xD;
//	1.0.0				2025-07-04		William Veim			Initial release    &#xD;
//&#xD;
//===============================================================================================================================&#xD;
//&#xD;
//		FUNKSJONALITET:&#xD;
//		*Calculate flow, based on differensial pressure (inlet/outlet) and pump curve input&#xD;
//&#xD;
//===============================================================================================================================&#xD;
&#xD;
(*************************************************************************&#xD;
 *	INPUT PARAMETERS&#xD;
 *************************************************************************)&#xD;
Wrk_InletPressure:= 			Inp_InletPressure;&#xD;
Wrk_OutletPressure:= 			Inp_OutletPressure;&#xD;
Wrk_PressureConstDiff:= 	Inp_PressureConstDiff;&#xD;
Wrk_LiftingHight:=				Inp_LiftingHight;&#xD;
Wrk_Unit := 						Cfg_FlowUnit;&#xD;
&#xD;
(*************************************************************************&#xD;
 *	FLOW CALCULATION&#xD;
 *************************************************************************)&#xD;
 &#xD;
&#xD;
Wrk_AbsolutePumpingHight := (Wrk_OutletPressure * 9.98) - (Wrk_InletPressure * 9.98) - Wrk_PressureConstDiff; //Calculates the absolute lifting hight ( Outlet level (m) - inlet level (m) + constant level diff)&#xD;
 &#xD;
 IF Wrk_OutletPressure * 9.98 &lt; Wrk_LiftingHight THEN //Outlet pressure must overcome the lifting hight&#xD;
	 Wrk_Flow := Wrk_FlowFactor * Wrk_AbsolutePumpingHight;&#xD;
 ELSE&#xD;
	 Clear(InOut:=Wrk_Flow);&#xD;
 END_IF;&#xD;
&#xD;
(*************************************************************************&#xD;
 *	UPDATE STRUCTURE&#xD;
 *************************************************************************)&#xD;
Ext_VFD.EXT_Operator.CalculatedFlow_Visible:=	TRUE;&#xD;
Ext_VFD.EXT_Operator.CalculatedFlow_Value:=		Wrk_FlowValue;&#xD;
Ext_VFD.EXT_Operator.CalculatedFlow_Unit:= 		Wrk_Unit;&#xD;
</Text></StructuredTextModel>