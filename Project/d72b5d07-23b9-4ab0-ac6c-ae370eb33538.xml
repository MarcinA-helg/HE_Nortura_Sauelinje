<StructuredTextModel xmlns="http://schemas.datacontract.org/2004/07/Omron.Cxap.Modules.StructuredText.Core" xmlns:i="http://www.w3.org/2001/XMLSchema-instance"><Text>//------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ &#xD;
//	NAME:			Puls                                                                                                                                                                                                                                                                           &#xD;
//	CREATOR:		Helgevold - Daniel Årvik                                                                                                                                                                                                                                                              &#xD;
//                                                                                                                                                                                                                                                                                                                            &#xD;
//------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ &#xD;
//  VERSION LOG:                                                                                                                                                                                                                                                                                                   &#xD;
//	VERSION			DATE				  SIGN							DESCRIPTION                                                                                                                                                                                                                                 &#xD;
//	1.0					2025-03-10		  Daniel Årvik			    Initial release&#xD;
//&#xD;
//===============================================================================================================================&#xD;
//&#xD;
//		BESKRIVELSE:&#xD;
//		Puls for akkumulering av data. Mengde per puls spesifiserers, data akkumuleres i dag, uke, måned, år.&#xD;
//&#xD;
//===============================================================================================================================&#xD;
&#xD;
DtToDateStruct(In:=GetTime(), DateStruct=&gt;DateStruct);&#xD;
&#xD;
EXT_AccumulatedData.EXT_Engineering.Unit := Inp_Unit;&#xD;
&#xD;
// Sjekker om det er ny dag&#xD;
IF Sample_Dag &lt;&gt; DateStruct.Day THEN&#xD;
	EXT_AccumulatedData.EXT_Statistics.Total_Yesterday := EXT_AccumulatedData.EXT_Statistics.Total_Today;&#xD;
	Clear(EXT_AccumulatedData.EXT_Statistics.Total_Today);&#xD;
END_IF;&#xD;
&#xD;
// Sjekker om det er ny uke&#xD;
IF Sample_Uke &lt;&gt; GetWeekOfYear(In:=GetTime()) THEN&#xD;
	Clear(EXT_AccumulatedData.EXT_Statistics.Total_Week);&#xD;
END_IF;&#xD;
&#xD;
// Sjekker om det er ny måned&#xD;
IF Sample_Måned &lt;&gt; DateStruct.Month THEN&#xD;
	Clear(EXT_AccumulatedData.EXT_Statistics.Total_Month);&#xD;
END_IF;&#xD;
			&#xD;
// Sjekker om det er nytt år&#xD;
IF GetWeekOfYear(In:=GetTime()) = 1 AND Sample_Uke &lt;&gt; GetWeekOfYear(In:=GetTime()) THEN&#xD;
	Clear(EXT_AccumulatedData.EXT_Statistics.Total_Year);&#xD;
END_IF;&#xD;
&#xD;
IF Inp_Pulse THEN&#xD;
	&#xD;
	// Inkrementer med 1x enhet&#xD;
	EXT_AccumulatedData.EXT_Statistics.Total_Today := EXT_AccumulatedData.EXT_Statistics.Total_Today + Inp_PulseAmount;&#xD;
	EXT_AccumulatedData.EXT_Statistics.Total_Week := EXT_AccumulatedData.EXT_Statistics.Total_Week + Inp_PulseAmount;&#xD;
	EXT_AccumulatedData.EXT_Statistics.Total_Month := EXT_AccumulatedData.EXT_Statistics.Total_Month + Inp_PulseAmount;&#xD;
	EXT_AccumulatedData.EXT_Statistics.Total_Year := EXT_AccumulatedData.EXT_Statistics.Total_Year + Inp_PulseAmount;&#xD;
	&#xD;
END_IF;&#xD;
&#xD;
// Sampler&#xD;
Sample_Dag := DateStruct.Day;&#xD;
Sample_Uke := GetWeekOfYear(In:=GetTime());&#xD;
Sample_Måned := DateStruct.Month;</Text></StructuredTextModel>