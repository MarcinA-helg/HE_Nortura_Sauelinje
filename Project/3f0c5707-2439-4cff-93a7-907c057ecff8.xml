<StructuredTextModel xmlns="http://schemas.datacontract.org/2004/07/Omron.Cxap.Modules.StructuredText.Core" xmlns:i="http://www.w3.org/2001/XMLSchema-instance"><Text>//-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------&#xD;
//	NAME:				HE_FC202_Drive_State&#xD;
//	CREATOR:			Helgevold - William Veim&#xD;
//&#xD;
// REQUIREMENTS: Danfoss FC202&#xD;
// DESCRTIPTION: 	Generates a string with Status code and description&#xD;
//-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------&#xD;
//  VERSION LOG:&#xD;
//	 VERSION			DATE				SIGN						DESCRIPTION&#xD;
//	 1.0					2025-02-25		William Veim			Initial release&#xD;
//&#xD;
//================================================================================================================================&#xD;
&#xD;
&#xD;
// Initilize&#xD;
Wrk_StatusValue := WORD_TO_UINT(Inp_InverterStatus);&#xD;
Wrk_StateString := '';&#xD;
Wrk_StateDescription := '';&#xD;
&#xD;
Wrk_HMIS_Value := INT_TO_STRING(Wrk_StatusValue);&#xD;
&#xD;
CASE Wrk_StatusValue OF&#xD;
	0:&#xD;
		Wrk_StateDescription := 'Remote operation';&#xD;
	1:&#xD;
		Wrk_StateDescription := 'Running';&#xD;
	2:&#xD;
		Wrk_StateDescription := 'Ready';&#xD;
	3:&#xD;
		Wrk_StateDescription := 'Running';&#xD;
	4:&#xD;
		Wrk_StateDescription := 'Accelerating';&#xD;
	5:&#xD;
		Wrk_StateDescription := 'Deacceleration';&#xD;
	6:&#xD;
		Wrk_StateDescription := 'Ramping active';&#xD;
	7:&#xD;
		Wrk_StateDescription := 'Fault';&#xD;
	8:&#xD;
		Wrk_StateDescription := 'Warning';&#xD;
	9:&#xD;
		Wrk_StateDescription :='Overload';&#xD;
	10:&#xD;
		Wrk_StateDescription := 'DC-link OK';&#xD;
	11:&#xD;
	   Wrk_StateDescription := 'Auto operating';&#xD;
	12:&#xD;
	   Wrk_StateDescription := 'Manual mode';&#xD;
	&#xD;
ELSE&#xD;
	Wrk_StateDescription := 'See Manual';&#xD;
&#xD;
END_CASE;&#xD;
&#xD;
&#xD;
// Add Status Code&#xD;
IF TestABit(In:=Cfg_Composition, Pos:=0) THEN&#xD;
	Wrk_StateString := CONCAT(Wrk_StateString, Wrk_HMIS_Value);&#xD;
END_IF;	&#xD;
&#xD;
&#xD;
// Add State Description&#xD;
IF TestABit(In:=Cfg_Composition, Pos:=1) THEN&#xD;
	IF LEN(Wrk_StateString) &gt; 0 THEN&#xD;
		Wrk_StateString := CONCAT(Wrk_StateString, Cfg_Delimiter);&#xD;
	END_IF;&#xD;
	Wrk_StateString := CONCAT(Wrk_StateString, Wrk_StateDescription);&#xD;
END_IF;&#xD;
&#xD;
HE_FC202_Drive_State := Wrk_StateString;</Text></StructuredTextModel>