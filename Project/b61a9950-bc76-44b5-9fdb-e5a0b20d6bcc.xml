<StructuredTextModel xmlns="http://schemas.datacontract.org/2004/07/Omron.Cxap.Modules.StructuredText.Core" xmlns:i="http://www.w3.org/2001/XMLSchema-instance"><Text>//------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ &#xD;
//	NAME:			Analog Input Simple                                                                                                                                                                                                                                                                         &#xD;
//	CREATOR:		Helgevold - William Veim                                                                                                                                                                                                                                                              &#xD;
//                                                                                                                                                                                                                                                                                                                            &#xD;
//------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ &#xD;
//  VERSION LOG:                                                                                                                                                                                                                                                                                                   &#xD;
//	VERSION		DATE				SIGN						DESCRIPTION                                                                                                                                                                                                                                 &#xD;
//	1.0.0				2025-04-22		William Veim			Initial release    &#xD;
//	1.0.1				2025-05-02		Ruben Byman			Added state control for unique Liquiline statuses&#xD;
// 1.0.2				2025-06-24		Jan Magne Dybvik	Added configuration for Alarm SMS Process value (Cfg_AlarmSMS_SignificantDigits and Cfg_AlarmSMS_UseUnitPrefix)&#xD;
//&#xD;
//===============================================================================================================================&#xD;
//&#xD;
//		FUNKSJONALITET:&#xD;
//		*Endress + Hauser Liquiline Analog Channel input&#xD;
//		*Excecution of analog input logic&#xD;
//&#xD;
//===============================================================================================================================&#xD;
&#xD;
(*************************************************************************&#xD;
 *	BLOCK SPESIFIC PARAMETERS&#xD;
 *************************************************************************)&#xD;
&#xD;
Wrk_AnalogInput_Logic.Cfg_ValueType:=TRUE; //INPUT VALUE TO LOGIC BLOCK IS PROCESS VALUE&#xD;
&#xD;
(*************************************************************************&#xD;
 *	UPDATE INPUT PARAMETERS&#xD;
 *************************************************************************)&#xD;
&#xD;
Wrk_AnalogInput_Logic.Inp_AlmSuppress:=				Inp_AlmSuppress;&#xD;
Wrk_AnalogInput_Logic.Inp_AlmSuppressDesc:=		Inp_AlmSuppressDesc;&#xD;
Wrk_AnalogInput_Logic.Inp_Value:=							Inp_AnChannel.Value;&#xD;
Wrk_AnalogInput_Logic.Inp_ModuleFault:=				Inp_EIP_Interface[Cfg_IP_Addr];&#xD;
&#xD;
(*************************************************************************&#xD;
 *	UPDATE CONFIG PARAMETERS&#xD;
 *************************************************************************)&#xD;
Wrk_AnalogInput_Logic.Cfg_SignalValue_Y0:=		0; //NOT IN USE&#xD;
Wrk_AnalogInput_Logic.Cfg_SignalValue_Y1:=		0; //NOT IN USE&#xD;
Wrk_AnalogInput_Logic.Cfg_SignalValue_Unit:=		''; //NOT IN USE&#xD;
Wrk_AnalogInput_Logic.Cfg_ControlCabinet:=		Cfg_ControlCabinet;&#xD;
Wrk_AnalogInput_Logic.Cfg_ControllerTAG:=			Cfg_ControllerTAG;&#xD;
Wrk_AnalogInput_Logic.Cfg_ProcessTAG:=				Cfg_ProcessTAG;&#xD;
Wrk_AnalogInput_Logic.Cfg_ProcessValue_Unit:=	HE_Liquiline_AnUnit(Inp_AnChannel.EngUnit);&#xD;
Wrk_AnalogInput_Logic.Cfg_AlarmSMS_SignificantDigits :=	Cfg_AlarmSMS_SignificantDigits;&#xD;
Wrk_AnalogInput_Logic.Cfg_AlarmSMS_UseUnitPrefix :=	Cfg_AlarmSMS_UseUnitPrefix;&#xD;
&#xD;
(*************************************************************************&#xD;
 *	UPDATING STATE CONTROL PARAMTERS&#xD;
 *************************************************************************)&#xD;
 //STATE 1 - Locked to "Input stuck"&#xD;
 //STATE 2 - Locked to "Process value out of range"&#xD;
 //STATE 3 - Locked to "Module fault"&#xD;
&#xD;
Wrk_Uncertain := Inp_AnChannel.Status = 64;&#xD;
Wrk_Bad := (Inp_AnChannel.Status &lt;&gt; 128) AND (Inp_AnChannel.Status &lt;&gt; 64);&#xD;
IF Wrk_Bad THEN&#xD;
	IF Inp_AnChannel.Status = 4 THEN&#xD;
		Wrk_Status := 'Configuration Error';&#xD;
	ELSIF Inp_AnChannel.Status = 12 THEN&#xD;
		Wrk_Status := 'Device Failure';&#xD;
	ELSE&#xD;
		Wrk_Status := 'Unknown error';&#xD;
	END_IF;&#xD;
ELSE&#xD;
	Wrk_Status := '';&#xD;
END_IF;&#xD;
&#xD;
Wrk_AnalogInput_Logic.Cfg_State4_InUse := 	TRUE;&#xD;
Wrk_AnalogInput_Logic.Inp_State4_Desc :=	'Uncertain quality';&#xD;
Wrk_AnalogInput_Logic.Inp_State4_State := 	Wrk_Uncertain;&#xD;
&#xD;
Wrk_AnalogInput_Logic.Cfg_State5_InUse := 	TRUE;&#xD;
Wrk_AnalogInput_Logic.Inp_State5_Desc :=	Wrk_Status;&#xD;
Wrk_AnalogInput_Logic.Inp_State5_State :=	Wrk_Bad;&#xD;
&#xD;
(*************************************************************************&#xD;
 *	EXCECUTING LOGIC BLOCK&#xD;
 *************************************************************************)&#xD;
 &#xD;
Wrk_AnalogInput_Logic(ENS:=TRUE, &#xD;
										Ext_AnalogValue:=	Ext_AnalogValue, &#xD;
										Int_Alarm:=				Int_Alarm); &#xD;
&#xD;
(*************************************************************************&#xD;
 *	UPDATING FB OUTPUT&#xD;
 *************************************************************************)&#xD;
 &#xD;
Sts_Fault:= 								Ext_AnalogValue.EXT_General.State_Quality&gt;0;&#xD;
Sts_AlarmToken:=					Wrk_AnalogInput_Logic.Out_AlarmToken;&#xD;
Out_ProcessValue:= 				Ext_AnalogValue.EXT_Operator.ProcessValue;&#xD;
Out_ProcessValue_Percent := 	Ext_AnalogValue.EXT_Operator.ProcessValue_Percent;&#xD;
</Text></StructuredTextModel>